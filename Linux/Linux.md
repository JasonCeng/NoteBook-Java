# Linux

## 目录

## 1.spinlock
spinlock在多处理器多线程环境的场景中有很广泛的使用，一般要求spinlock的临界区尽量简短，这样获取的锁可以尽快释放，以满足其他忙等的线程。spinlock和mutex不同，spinlock不会导致线程的状态切换（用户态->内核态），但是spinlock使用不当（如临界区执行的时间过长）会导致cpu busy飙高。

## 2.进程间的通信方式

  * **8种方式**

  1.管道（Pipe）：管道可用于具有亲缘关系进程间的通信，允许一个进程和另一个与它有共同祖先的进程之间通信。

  2.命名管道（named pipe）：命名管道克服了管道没有名字的限制，因此，除具有管道所具有的功能外，它还允许无亲缘关系进程间的通信。命名管道在文件系统中有对应的文件名。命名管道通过命令mkfifo或系统调用mkfifo来创建。

  3.信号（Signal）：信号是比较复杂的通信方式，用于接受进程有某种事件发生，除了用进程间通信外，进程还可以发送信号给进程本身；linux除了支持Unix早起信号语义函数signal外，还支持语义符合Posix.1标准的信号函数sigaction（实际上，该函数是基于BSD的，BSD为了实现可靠信号机制，又能够统一对外接口，用sigaction函数重新实现了signal函数）。

  4.消息（Message）队列：消息队列是消息的链接表，包括Posix消息队列system V消息队列。有足够权限的进程可以向队列中添加消息，被附于读权限的进程则可以读走队列中的消息。消息队列克服了信号承载信息量少，管道只能承载无格式字节流以及缓冲区大小受限等缺陷。

  5.共享内存：使得多个进程可以访问同一块内存空间，是最快的可用IPC形式。是针对其他通信机制运行效率较低而设计的。往往与其他通信机制，如信号量结合使用，来达到进程间的同步及互斥。

  6.内存映射（mapped memory）：内存映射允许任何多个进程间通信，每个使用该机制的进程会通过把一个共享的文件映射到自己的进程地址空间来实现它。

  7.信号量（semaphore）：主要作为进程间以及同一进程不同线程之间的同步手段。

  8.套接字（Socket）：更为一般的进程通信机制，可用于不同机器之间的进程间通信。起初是由Unix系统的BSD分支开发出来的，但现在一般可以移植到其他类Unix系统上：Linux和System V的变种都支持套接字。

  * **总结**

  * Linux进程间通信：管道、信号、消息队列、共享内存、信号量、套接字（socket）

  * Linux线程间通信：互斥量（mutex）、信号量、条件变量

  * Windows进程间通信：管道、消息队列、共享内存、信号量（semaphore）、套接字（socket）

  * Windows线程间通信：互斥量（mutex）、信号量（semaphore）、临界区（critical section）、事件（event）
